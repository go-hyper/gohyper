<!DOCTYPE html>
<html ng-app="gohyper" ng-csp>
<header>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="bower_components/angular/angular-csp.css">
  <link rel="stylesheet" href="css/gohyper.css">
  <link rel="stylesheet" href="css/iframe.css">
  <script src="bower_components/angular/angular.min.js"></script>
  <script src="bower_components/angular-route/angular-route.min.js"></script>
  <script src="bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
  <script src="bower_components/rangy/rangy-core.js"></script>
  <script src="bower_components/rangy/rangy-classapplier.js"></script>
  <script src="bower_components/rangy/rangy-highlighter.js"></script>
  <script src="bower_components/rangy/rangy-serializer.js"></script>
  <script type="text/javascript" src="js/gohyper.js"></script>
</header>
<body>
  <form class="form-inline gh-form" role="form" name="quoteForm" ng-controller="QuoteController">

    <div class="container">

      <h3 class="text-center">
        <span class="fa-stack">
          <i class="fa fa-circle fa-stack-2x gh-circle-color"></i>
          <i class="fa fa-link fa-stack-1x gh-icon-color"></i>
        </span>
        GoHyper
      </h3>

      <div ng-if="form.quote">

        <div class="form-group text-muted">
          <blockquote>
            <p>
              <i class="fa fa-quote-left gh-quote-icon"></i>
              {{form.quote}}
            </p>
          </blockquote>
        </div>

        <div class="form-group">
          <label for="hyperlink">Hyperlink to</label>
          <div class="gh-link" ng-if="form.hyperlinks.length">
            <span ng-repeat="link in form.hyperlinks">
              <a target="_blank" href="{{link}}" title="{{link}}">
                {{link | limitTo: 45}}{{link.length > 45 ? '...' : ''}}
              </a>
              <a href="" ng-click="form.hyperlinks.splice($index, 1); updateLinks()">
                <i class="remove glyphicon glyphicon-remove-circle gh-remove"></i>
              </a>
              <br>
            </span>
          </div>
          <div class="input-group">
            <input class="form-control" type="text" name="hyperlinks" ng-model="form.hyperlink" uib-typeahead="link for link in links | filter:$viewValue"
              placeholder="URL" ng-keypress="($event.which === 13) && pushLink(form.hyperlink)">
            <span class="input-group-btn">
              <button class="btn btn-default" type="button" ng-click="pushLink(form.hyperlink);">
                <i class="fa fa-plus-circle"></i> Add
              </button>
            </span>
          </div>
        </div>

        <div class="form-group">
          <label for="tags">Tags</label>
          <div class="gh-label-group" ng-if="form.tags.length">
            <span ng-repeat="tag in form.tags">
              <span class="label label-default gh-label">
                {{tag}}
                <a href="" ng-click="form.tags.splice($index, 1)">
                  <i class="remove glyphicon glyphicon-remove-circle gh-remove"></i>
                </a>
              </span>
            </span>
          </div>
          <div class="input-group">
            <input class="form-control" type="text" name="tags" ng-model="form.tag" placeholder="Tags" ng-keypress="($event.which === 13) && pushTag(form.tag)">
            <span class="input-group-btn">
              <button class="btn btn-default" type="button" ng-click="pushTag(form.tag);">
                <i class="fa fa-plus-circle"></i> Add
              </button>
            </span>
          </div>
        </div>

        <div class="form-group">
          <label for="comment">Comment</label>
          <textarea class="form-control gh-input" name="comment" rows="2" ng-model="form.comment" placeholder="Comment"></textarea>
        </div>

        <div class="form-group">
          <div class="text-right">
            <button type="button" class="btn btn-primary gh-save-button" ng-click="clicked = true; addQuote();" ng-disabled="clicked || form.tag.length > 0 || form.hyperlink.length > 0">
              <i class="fa fa-check-circle"></i> Save
            </button>
          </div>
        </div>

      </div>



      <div ng-if="!form.quote" class="gh-margin" ng-controller="NotepadController">
        <div ng-if="quotes.length > 0">
          <h4>Selected quotes</h4>

          <table class="table table-striped">
            <tbody>
              <tr ng-repeat="quote in quotes">
                <td>
                  <!-- http://stackoverflow.com/a/25892456/4419582 -->
                  <p>"{{quote.quote | limitTo: 60 }}{{quote.quote.length > 60 ? '...' : ''}}"</p>

                  <p>
                    <span ng-repeat="tag in quote.tags">
                      <span class="label label-default gh-label">
                        {{tag}}
                      </span>
                    </span>
                  </p>

                  <p>
                    <div ng-repeat="link in quote.hyperlinks">
                      <a target="_blank" href="{{link}}" title="{{link}}">
                        {{link | limitTo: 35}}{{link.length > 35 ? '...' : ''}}
                      </a>
                    </div>
                  </p>

                </td>
                <td>
                  <a href="#/quote/edit/{{quote.id}}">
                    <button type="button" class="btn btn-primary btn-xs gh-small-button">
                      <i class="fa fa-pencil-square-o"></i> Edit
                    </button>
                  </a>
                  <button type="button" class="btn btn-danger btn-xs gh-small-button" ng-click="deleteQuote(quote.id)">
                    <i class="fa fa-times"></i> Remove
                  </button>
                </td>
              </tr>
            </tbody>
          </table>

          <div class="text-center" ng-if="quotes.length > 5">
            <uib-pagination boundary-links="true" total-items="pagination.total" ng-model="pagination.page" class="pagination-sm" max-size="pagination.maxSize" boundary-links="true" rotate="false" num-pages="numPages"
            previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>
          </div>

        </div>

        <div ng-if="!quotes.length">
          <h4>No quotes selected</h4>
        </div>
      </div>




    </div>

  </form>

</body>
</html>